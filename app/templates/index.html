{% extends "base.html" %}
{% block content %}
    <a href="{{ url_for('new_post') }}"> New post</a>
    {% for title, posts in annotated_posts %}
        <div class="posts">
            <h2> {{ title }}</h2>
            {% for post in posts %}
                <div class="post">
                    <h3 class="post-title">
                        <a href="{{ url_for("post", id=post.id) }}">{{post.title}}</a>
                    </h3>
                    <span class="difficulty-{{ post.difficulty }}"> {{ post.get_difficulty_string() }}</span>
                    {% if post.tags %}
                        <ul class="tags">
                        {% for tag in post.tags %}
                            <li>{{ tag.name }}</li>
                        {% endfor %}
                        </ul>
                    {% endif %}
                    <div class="author">
                        by <a href="{{ url_for('user', username=post.author.username) }}" >{{ post.author.username }}</a>
                    </div>
                    <div class="content">
                        {{post.body}}
                    </div>
                </div>
            {% endfor %}
            <a id="show-more-posts" data-type="{{loop.index}}">Show more</a>
        </div>
    {% endfor %}
{% endblock %}